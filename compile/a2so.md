# 静态库 .a 转成共享库 .so

.a 是有一系列 .o 文件通过 ar 程序打包在一起的静态库，要把它转成动态库只需先解开，生成一堆 .o 文件，再通过编译器（比如 gcc 或 ifort，视具体情况而定）编成动态库即可。

```bash
ar -x libtest.a
gcc -shared *.o -o libtest.so
```

不过需要注意的是：

> 并非所有 .a 都能转成 .so，前提是 .a 解出的 .o 文件中含有“位置独立代码”，如果不含的话则无法生成 .so。而“位置独立代码”要求在编译生成 .a 时指定 -fpic 或 -fPIC 选项才行。所以，如果只有一个 .a 文件而没有相应源文件且这个 .a 中不含“位置独立代码”，那么它无法转成 .so 文件。
> 我觉得生成 .so 时应该用与生成 .a 时一样的编译器，如果不一样不知道是否会造成问题。
